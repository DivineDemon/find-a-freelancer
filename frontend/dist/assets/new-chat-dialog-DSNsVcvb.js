import{w as C,j as e,Y as _,r as v,a4 as w,c as N,d as S,a5 as F,a6 as P,B as i,a0 as D,a7 as k,a8 as B,a9 as I,aa as T,F as q,g as n,h as c,i as l,k as d,I as j,m,L,t as u,o as $,s as p}from"./index-q-HLww4P.js";import{P as M}from"./plus-16eEapJD.js";/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],V=C("briefcase",R);function E({className:a,...o}){return e.jsx("textarea",{"data-slot":"textarea",className:_("field-sizing-content flex min-h-16 w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-xs outline-none transition-[color,box-shadow] placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 md:text-sm dark:bg-input/30 dark:aria-invalid:ring-destructive/40",a),...o})}const z=$({project_title:p().min(1,"Project title is required").max(100,"Project title too long"),project_description:p().min(10,"Project description must be at least 10 characters").max(500,"Project description too long"),project_budget:p().min(1,"Budget is required").max(50,"Budget description too long")});function U({user:a,onChatCreated:o}){const[g,r]=v.useState(!1),[b,{isLoading:h}]=w(),x=localStorage.getItem("user_type")==="client_hunter"&&localStorage.getItem("has_paid")!=="true",s=N({resolver:S(z),defaultValues:{project_title:"",project_description:"",project_budget:""}}),f=async t=>{try{(await b({chatCreate:{participant_id:a.id,project_title:t.project_title,project_description:t.project_description,project_budget:t.project_budget}})).data&&(u.success("Chat started successfully!"),r(!1),s.reset(),o?.())}catch{u.error("Failed to start chat")}};return e.jsxs(F,{open:g,onOpenChange:r,children:[e.jsx(P,{asChild:!0,children:e.jsxs(i,{size:"sm",className:"gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),"Start Chat"]})}),e.jsxs(k,{className:"sm:max-w-[500px]",children:[e.jsxs(B,{children:[e.jsx(I,{children:"Start a Conversation"}),e.jsx(T,{children:x?"Complete payment to start conversations with freelancers.":`Start a conversation with ${a.first_name} ${a.last_name} about your project.`})]}),x?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("div",{className:"mb-4 text-6xl",children:"ðŸ”’"}),e.jsx("h3",{className:"mb-2 font-semibold text-xl",children:"Payment Required"}),e.jsx("p",{className:"mb-4 text-muted-foreground",children:"Client hunters need to pay a one-time $50 platform access fee to start conversations with freelancers."}),e.jsx(i,{onClick:()=>{r(!1),window.location.href="/dashboard"},className:"w-full",children:"Complete Payment"})]})}):e.jsx(q,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(f),className:"space-y-4",children:[e.jsx(n,{control:s.control,name:"project_title",render:({field:t})=>e.jsxs(c,{children:[e.jsx(l,{children:"Project Title"}),e.jsx(d,{children:e.jsx(j,{placeholder:"e.g., Responsive E-commerce Website",...t})}),e.jsx(m,{})]})}),e.jsx(n,{control:s.control,name:"project_description",render:({field:t})=>e.jsxs(c,{children:[e.jsx(l,{children:"Project Description"}),e.jsx(d,{children:e.jsx(E,{placeholder:"Describe your project requirements, timeline, and any specific features you need...",className:"min-h-[100px]",...t})}),e.jsx(m,{})]})}),e.jsx(n,{control:s.control,name:"project_budget",render:({field:t})=>e.jsxs(c,{children:[e.jsx(l,{children:"Budget Range"}),e.jsx(d,{children:e.jsx(j,{placeholder:"e.g., $1000 - $5000",...t})}),e.jsx(m,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(i,{type:"submit",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),"Starting Chat..."]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Start Chat"]})})]})]})})]})]})}export{V as B,U as N};
