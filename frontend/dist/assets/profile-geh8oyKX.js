import{w as M,r as g,x as V,K as B,c as y,d as P,o as E,j as e,L as w,M as D,C,A as b,D as F,E as L,B as j,G as S,F as k,N as U,O as A,P as I,g as n,h as i,i as c,k as d,I as o,m,s as x,t as p}from"./index-q-HLww4P.js";/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],W=M("camera",H);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],O=M("lock",K),Q=E({first_name:x().min(1,"First name is required").max(50,"First name too long"),last_name:x().min(1,"Last name is required").max(50,"Last name too long"),profile_picture:x().url("Must be a valid URL").optional().nullable()}),$=E({current_password:x().min(1,"Current password is required"),new_password:x().min(8,"Password must be at least 8 characters").max(100,"Password too long"),confirm_password:x().min(1,"Please confirm your password")}).refine(f=>f.new_password===f.confirm_password,{message:"Passwords don't match",path:["confirm_password"]}),X=function(){const[t,_]=g.useState(!1),[h,N]=g.useState(!1),{data:s,isLoading:q,refetch:z}=V(),[v,{isLoading:u}]=B(),a=y({resolver:P(Q),defaultValues:{first_name:s?.first_name||"",last_name:s?.last_name||"",profile_picture:s?.profile_picture||""}}),l=y({resolver:P($)});g.useEffect(()=>{s&&!t&&a.reset({first_name:s.first_name,last_name:s.last_name,profile_picture:s.profile_picture||""})},[s,t,a]);const R=async r=>{try{await v({userUpdate:{first_name:r.first_name,last_name:r.last_name,profile_picture:r.profile_picture||null}}),p.success("Profile updated successfully!"),_(!1),z()}catch{p.error("Failed to update profile")}},T=async r=>{try{await v({userUpdate:{current_password:r.current_password,new_password:r.new_password}}),p.success("Password changed successfully!"),N(!1),l.reset()}catch{p.error("Failed to change password")}};return q?e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx(w,{className:"size-20 animate-spin"})}):s?e.jsx("div",{className:"flex h-full w-full flex-col items-start justify-start py-5",children:e.jsx(D,{children:e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-3xl",children:"Profile"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account information and settings"})]}),e.jsxs(C,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Profile Information"}),e.jsx(L,{children:"Update your personal information and profile picture"})]}),e.jsx(j,{variant:t?"outline":"default",onClick:()=>_(!t),children:t?"Cancel":"Edit Profile"})]})}),e.jsx(S,{children:t?e.jsx(k,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(R),className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(U,{className:"h-20 w-20",children:[e.jsx(A,{src:a.watch("profile_picture")||"",alt:"Profile"}),e.jsx(I,{className:"text-lg",children:e.jsx(W,{className:"h-8 w-8"})})]}),e.jsx("div",{className:"flex-1",children:e.jsx(n,{control:a.control,name:"profile_picture",render:({field:r})=>e.jsxs(i,{children:[e.jsx(c,{children:"Profile Picture URL"}),e.jsx(d,{children:e.jsx(o,{placeholder:"https://example.com/image.jpg",...r,value:r.value||""})}),e.jsx(m,{})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(n,{control:a.control,name:"first_name",render:({field:r})=>e.jsxs(i,{children:[e.jsx(c,{children:"First Name"}),e.jsx(d,{children:e.jsx(o,{...r})}),e.jsx(m,{})]})}),e.jsx(n,{control:a.control,name:"last_name",render:({field:r})=>e.jsxs(i,{children:[e.jsx(c,{children:"Last Name"}),e.jsx(d,{children:e.jsx(o,{...r})}),e.jsx(m,{})]})})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(j,{type:"submit",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(U,{className:"h-20 w-20",children:[e.jsx(A,{src:s.profile_picture||"",alt:"Profile"}),e.jsxs(I,{className:"text-lg",children:[s.first_name?.[0],s.last_name?.[0]]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[s.first_name," ",s.last_name]}),e.jsx("p",{className:"text-muted-foreground",children:s.email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-muted-foreground text-sm",children:"First Name"}),e.jsx("p",{className:"text-sm",children:s.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-muted-foreground text-sm",children:"Last Name"}),e.jsx("p",{className:"text-sm",children:s.last_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-muted-foreground text-sm",children:"User Type"}),e.jsx("p",{className:"text-sm capitalize",children:s.user_type.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-muted-foreground text-sm",children:"Account Status"}),e.jsx("p",{className:"text-sm",children:s.is_active?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-muted-foreground text-sm",children:"Payment Status"}),e.jsx("p",{className:"text-sm",children:s.user_type==="freelancer"?"Free Platform Access":localStorage.getItem("has_paid")==="true"?"Paid - Full Access":"Payment Required"})]})]})]})})]}),e.jsxs(C,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Change Password"}),e.jsx(L,{children:"Update your account password"})]}),e.jsx(j,{variant:h?"outline":"default",onClick:()=>N(!h),children:h?"Cancel":"Change Password"})]})}),e.jsx(S,{children:h?e.jsx(k,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(T),className:"space-y-4",children:[e.jsx(n,{control:l.control,name:"current_password",render:({field:r})=>e.jsxs(i,{children:[e.jsx(c,{children:"Current Password"}),e.jsx(d,{children:e.jsx(o,{type:"password",...r})}),e.jsx(m,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(n,{control:l.control,name:"new_password",render:({field:r})=>e.jsxs(i,{children:[e.jsx(c,{children:"New Password"}),e.jsx(d,{children:e.jsx(o,{type:"password",...r})}),e.jsx(m,{})]})}),e.jsx(n,{control:l.control,name:"confirm_password",render:({field:r})=>e.jsxs(i,{children:[e.jsx(c,{children:"Confirm New Password"}),e.jsx(d,{children:e.jsx(o,{type:"password",...r})}),e.jsx(m,{})]})})]}),e.jsx(j,{type:"submit",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}),"Changing Password..."]}):"Change Password"})]})}):e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:'Click "Change Password" to update your password'})]})})]})]})})}):e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"mb-2 font-semibold text-lg",children:"User not found"}),e.jsx("p",{className:"text-muted-foreground",children:"Please check your authentication."})]})})};export{X as component};
