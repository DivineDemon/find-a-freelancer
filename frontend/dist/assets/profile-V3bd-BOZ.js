import{c as I,v as w,ad as B,ap as G,b as v,d as y,o as M,j as e,n as _,ag as H,ah as P,ai as C,aj as b,ak as F,B as f,am as S,F as k,aq as L,ar as A,as as U,g as n,h as i,i as c,k as d,I as o,m,s as x,t as h}from"./index-H8J98cVM.js";/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],D=I("camera",W);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],$=I("lock",Q),J=M({first_name:x().min(1,"First name is required").max(50,"First name too long"),last_name:x().min(1,"Last name is required").max(50,"Last name too long"),profile_picture:x().url("Must be a valid URL").optional().nullable()}),K=M({current_password:x().min(1,"Current password is required"),new_password:x().min(8,"Password must be at least 8 characters").max(100,"Password too long"),confirm_password:x().min(1,"Please confirm your password")}).refine(p=>p.new_password===p.confirm_password,{message:"Passwords don't match",path:["confirm_password"]}),X=function(){const[t,N]=w.useState(!1),[u,g]=w.useState(!1),{data:s,isLoading:q,refetch:E}=B(),[z,{isLoading:j}]=G(),r=v({resolver:y(J),defaultValues:{first_name:s?.first_name||"",last_name:s?.last_name||"",profile_picture:s?.profile_picture||""}}),l=v({resolver:y(K)});w.useEffect(()=>{s&&!t&&r.reset({first_name:s.first_name,last_name:s.last_name,profile_picture:s.profile_picture||""})},[s,t,r]);const R=async a=>{try{await z({userUpdate:{first_name:a.first_name,last_name:a.last_name,profile_picture:a.profile_picture||null}}),h.success("Profile updated successfully!"),N(!1),E()}catch{h.error("Failed to update profile")}},T=async a=>{try{h.error("Password change not yet implemented"),g(!1),h.success("Password changed successfully!"),g(!1),l.reset()}catch{h.error("Failed to change password")}};return q?e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx(_,{className:"size-20 animate-spin"})}):s?e.jsx("div",{className:"flex h-full w-full flex-col items-start justify-start py-5",children:e.jsx(H,{children:e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-3xl",children:"Profile"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account information and settings"})]}),e.jsxs(P,{children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Profile Information"}),e.jsx(F,{children:"Update your personal information and profile picture"})]}),e.jsx(f,{variant:t?"outline":"default",onClick:()=>N(!t),children:t?"Cancel":"Edit Profile"})]})}),e.jsx(S,{children:t?e.jsx(k,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(R),className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(L,{className:"h-20 w-20",children:[e.jsx(A,{src:r.watch("profile_picture")||"",alt:"Profile"}),e.jsx(U,{className:"text-lg",children:e.jsx(D,{className:"h-8 w-8"})})]}),e.jsx("div",{className:"flex-1",children:e.jsx(n,{control:r.control,name:"profile_picture",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:"Profile Picture URL"}),e.jsx(d,{children:e.jsx(o,{placeholder:"https://example.com/image.jpg",...a,value:a.value||""})}),e.jsx(m,{})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(n,{control:r.control,name:"first_name",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:"First Name"}),e.jsx(d,{children:e.jsx(o,{...a})}),e.jsx(m,{})]})}),e.jsx(n,{control:r.control,name:"last_name",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:"Last Name"}),e.jsx(d,{children:e.jsx(o,{...a})}),e.jsx(m,{})]})})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(f,{type:"submit",disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(L,{className:"h-20 w-20",children:[e.jsx(A,{src:s.profile_picture||"",alt:"Profile"}),e.jsxs(U,{className:"text-lg",children:[s.first_name?.[0],s.last_name?.[0]]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[s.first_name," ",s.last_name]}),e.jsx("p",{className:"text-muted-foreground",children:s.email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-muted-foreground text-sm",children:"First Name"}),e.jsx("p",{className:"text-sm",children:s.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-muted-foreground text-sm",children:"Last Name"}),e.jsx("p",{className:"text-sm",children:s.last_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-muted-foreground text-sm",children:"User Type"}),e.jsx("p",{className:"text-sm capitalize",children:s.user_type.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-muted-foreground text-sm",children:"Account Status"}),e.jsx("p",{className:"text-sm",children:s.is_active?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-muted-foreground text-sm",children:"Payment Status"}),e.jsx("p",{className:"text-sm",children:s.user_type==="freelancer"?"Free Platform Access":localStorage.getItem("has_paid")==="true"?"Paid - Full Access":"Payment Required"})]})]})]})})]}),e.jsxs(P,{children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Change Password"}),e.jsx(F,{children:"Update your account password"})]}),e.jsx(f,{variant:u?"outline":"default",onClick:()=>g(!u),children:u?"Cancel":"Change Password"})]})}),e.jsx(S,{children:u?e.jsx(k,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(T),className:"space-y-4",children:[e.jsx(n,{control:l.control,name:"current_password",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:"Current Password"}),e.jsx(d,{children:e.jsx(o,{type:"password",...a})}),e.jsx(m,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(n,{control:l.control,name:"new_password",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:"New Password"}),e.jsx(d,{children:e.jsx(o,{type:"password",...a})}),e.jsx(m,{})]})}),e.jsx(n,{control:l.control,name:"confirm_password",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:"Confirm New Password"}),e.jsx(d,{children:e.jsx(o,{type:"password",...a})}),e.jsx(m,{})]})})]}),e.jsx(f,{type:"submit",disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"mr-2 h-4 w-4 animate-spin"}),"Changing Password..."]}):"Change Password"})]})}):e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:'Click "Change Password" to update your password'})]})})]})]})})}):e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"mb-2 font-semibold text-lg",children:"User not found"}),e.jsx("p",{className:"text-muted-foreground",children:"Please check your authentication."})]})})};export{X as component};
