import{c as E,j as e,a3 as G,v as i,a5 as V,b as W,d as X,a6 as J,a7 as K,B as c,a8 as Y,a9 as Z,aa as ee,ab as se,ac as te,F as ae,g as S,h as F,i as k,k as P,I as p,m as R,n as y,t as B,o as re,s as D,ad as ie,ae as ne,af as le,ag as ce,ah as L,ai as oe,aj as de,ak as me,al as O,am as M,an as _,ao as T}from"./index-H8J98cVM.js";import{P as xe}from"./plus-Be2JcRR3.js";/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ue=E("briefcase",he);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],je=E("funnel",pe);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],U=E("search",ge);function fe({className:j,...o}){return e.jsx("textarea",{"data-slot":"textarea",className:G("field-sizing-content flex min-h-16 w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-xs outline-none transition-[color,box-shadow] placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 md:text-sm dark:bg-input/30 dark:aria-invalid:ring-destructive/40",j),...o})}const Ne=re({project_title:D().min(1,"Project title is required").max(100,"Project title too long"),project_description:D().min(10,"Project description must be at least 10 characters").max(500,"Project description too long"),project_budget:D().min(1,"Budget is required").max(50,"Budget description too long")});function ve({user:j,onChatCreated:o}){const[f,n]=i.useState(!1),[h,{isLoading:N}]=V(),a=localStorage.getItem("user_type")==="client_hunter"&&localStorage.getItem("has_paid")!=="true",r=W({resolver:X(Ne),defaultValues:{project_title:"",project_description:"",project_budget:""}}),l=async t=>{try{(await h({chatCreate:{participant_id:j.id,project_title:t.project_title,project_description:t.project_description,project_budget:t.project_budget}})).data&&(B.success("Chat started successfully!"),n(!1),r.reset(),o?.())}catch{B.error("Failed to start chat")}};return e.jsxs(J,{open:f,onOpenChange:n,children:[e.jsx(K,{asChild:!0,children:e.jsxs(c,{size:"sm",className:"gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"Start Chat"]})}),e.jsxs(Z,{className:"sm:max-w-[500px]",children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Start a Conversation"}),e.jsx(te,{children:a?"Complete payment to start conversations with freelancers.":`Start a conversation with ${j.first_name} ${j.last_name} about your project.`})]}),a?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("div",{className:"mb-4 text-6xl",children:"ðŸ”’"}),e.jsx("h3",{className:"mb-2 font-semibold text-xl",children:"Payment Required"}),e.jsx("p",{className:"mb-4 text-muted-foreground",children:"Client hunters need to pay a one-time $50 platform access fee to start conversations with freelancers."}),e.jsx(c,{onClick:()=>{n(!1),window.location.href="/dashboard"},className:"w-full",children:"Complete Payment"})]})}):e.jsx(ae,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(l),className:"space-y-4",children:[e.jsx(S,{control:r.control,name:"project_title",render:({field:t})=>e.jsxs(F,{children:[e.jsx(k,{children:"Project Title"}),e.jsx(P,{children:e.jsx(p,{placeholder:"e.g., Responsive E-commerce Website",...t})}),e.jsx(R,{})]})}),e.jsx(S,{control:r.control,name:"project_description",render:({field:t})=>e.jsxs(F,{children:[e.jsx(k,{children:"Project Description"}),e.jsx(P,{children:e.jsx(fe,{placeholder:"Describe your project requirements, timeline, and any specific features you need...",className:"min-h-[100px]",...t})}),e.jsx(R,{})]})}),e.jsx(S,{control:r.control,name:"project_budget",render:({field:t})=>e.jsxs(F,{children:[e.jsx(k,{children:"Budget Range"}),e.jsx(P,{children:e.jsx(p,{placeholder:"e.g., $1000 - $5000",...t})}),e.jsx(R,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(c,{type:"submit",disabled:N,children:N?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"mr-2 h-4 w-4 animate-spin"}),"Starting Chat..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),"Start Chat"]})})]})]})})]})]})}const _e=function(){const[o,f]=i.useState(0),[n]=i.useState(50),[h,N]=i.useState(""),[a,r]=i.useState([0,1e3]),[l,t]=i.useState([0,50]),[m,$]=i.useState([]),[g,z]=i.useState([]),[w,q]=i.useState(!1),{data:I}=ie(),{data:d,isLoading:H,error:Q}=ne();i.useEffect(()=>{if(d){const s=d;r([s.hourly_rate_range.min,s.hourly_rate_range.max]),t([s.experience_range.min,s.experience_range.max])}},[d]);const A=()=>{if(d){const s=d;r([s.hourly_rate_range.min,s.hourly_rate_range.max]),t([s.experience_range.min,s.experience_range.max]),$([]),z([]),N("")}};i.useEffect(()=>{f(0)},[]);const{data:b,isLoading:v}=le({skip:o*n,limit:n,searchQuery:h||void 0,minHourlyRate:a[0]>0?a[0]:void 0,maxHourlyRate:a[1]<1e3?a[1]:void 0,minExperience:l[0]>0?l[0]:void 0,maxExperience:l[1]<50?l[1]:void 0,skills:m.length>0?m.join(","):void 0,technologies:g.length>0?g.join(","):void 0});if(v&&o===0)return e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx(y,{className:"size-20 animate-spin"})});const x=b||[];return e.jsx("div",{className:"flex h-full w-full flex-col items-start justify-start py-5",children:e.jsx(ce,{children:e.jsxs("div",{className:"w-full space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-3xl",children:"Discover"}),e.jsx("p",{className:"text-muted-foreground",children:"Find talented freelancers or connect with potential clients"})]})}),e.jsxs(L,{children:[e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"Search & Filters"}),e.jsx(me,{children:"Find freelancers by skills, experience, and rates"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>q(!w),children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),w?"Hide":"Show"," Filters"]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:A,children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Reset"]})]})]})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"-translate-y-1/2 absolute top-1/2 left-3 h-4 w-4 text-muted-foreground"}),e.jsx(p,{placeholder:"Search by name, title, or skills...",value:h,onChange:s=>N(s.target.value),className:"pl-10"})]}),w&&e.jsxs(e.Fragment,{children:[Q&&e.jsx("div",{className:"mb-4 rounded-md border border-destructive/20 bg-destructive/10 p-3",children:e.jsx("p",{className:"text-destructive text-sm",children:"Error loading filter options. Using default values."})}),e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{className:"font-medium text-sm",children:"Hourly Rate Range"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{type:"number",placeholder:"Min",value:a[0],onChange:s=>r([Number(s.target.value),a[1]]),className:"w-20"}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx(p,{type:"number",placeholder:"Max",value:a[1],onChange:s=>r([a[0],Number(s.target.value)]),className:"w-20"}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"$/hr"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{className:"font-medium text-sm",children:"Experience Range"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{type:"number",placeholder:"Min",value:l[0],onChange:s=>t([Number(s.target.value),l[1]]),className:"w-20"}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx(p,{type:"number",placeholder:"Max",value:l[1],onChange:s=>t([l[0],Number(s.target.value)]),className:"w-20"}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"years"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{className:"font-medium text-sm",children:"Skills"}),e.jsx("div",{className:"flex max-h-32 flex-wrap gap-2 overflow-y-auto",children:H?e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[e.jsx(y,{className:"h-4 w-4 animate-spin"}),"Loading skills..."]}):d&&d.skills.map(s=>e.jsx(T,{variant:m.includes(s)?"default":"outline",className:"cursor-pointer hover:bg-primary/10",onClick:()=>{$(u=>u.includes(s)?u.filter(C=>C!==s):[...u,s])},children:s},s))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{className:"font-medium text-sm",children:"Technologies"}),e.jsx("div",{className:"flex max-h-32 flex-wrap gap-2 overflow-y-auto",children:H?e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[e.jsx(y,{className:"h-4 w-4 animate-spin"}),"Loading technologies..."]}):d&&d.technologies.map(s=>e.jsx(T,{variant:g.includes(s)?"default":"outline",className:"cursor-pointer hover:bg-primary/10",onClick:()=>{z(u=>u.includes(s)?u.filter(C=>C!==s):[...u,s])},children:s},s))})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"font-semibold text-xl",children:"Results"}),!v&&e.jsxs("span",{className:"text-muted-foreground text-sm",children:[x.length," ",x.length===1?"freelancer":"freelancers"," found"]})]}),x.length>0&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[e.jsxs("span",{children:["Page ",o+1]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Showing ",Math.min(x.length,n)," of ",x.length]})]})]}),x.length===0?e.jsx(L,{children:e.jsxs(M,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(U,{className:"mb-4 h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mb-2 font-semibold text-lg",children:h||m.length>0||g.length>0?"No freelancers match your criteria":"No users found"}),e.jsx("p",{className:"text-center text-muted-foreground",children:h||m.length>0||g.length>0?"Try adjusting your search criteria or filters to find more freelancers.":"Try adjusting your search criteria or filters."}),(h||m.length>0||g.length>0)&&e.jsxs(c,{variant:"outline",onClick:A,className:"mt-4",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Clear All Filters"]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:x.map(s=>e.jsx(L,{className:`transition-colors ${s.is_active?"cursor-pointer hover:bg-muted/50":"cursor-not-allowed opacity-60"}`,children:e.jsx(M,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:e.jsx(ue,{className:"h-6 w-6 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[e.jsxs("h3",{className:"font-semibold",children:[s.first_name," ",s.last_name]}),!s.is_active&&e.jsx(T,{variant:"destructive",className:"text-xs",children:"Inactive"})]}),e.jsx("span",{className:`inline-block rounded-full px-2 py-1 text-xs ${s.user_type==="freelancer"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:s.user_type.replace("_"," ")})]})]}),I?.user_type==="client_hunter"&&localStorage.getItem("has_paid")!=="true"?e.jsx("p",{className:"text-muted-foreground text-sm",children:"Complete payment to view contact details"}):e.jsx("p",{className:"text-muted-foreground text-sm",children:s.email}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:s.user_type==="freelancer"?"Available for projects":"Can hire freelancers"}),e.jsxs("div",{className:"space-y-2",children:[I?.user_type==="client_hunter"&&s.user_type==="freelancer"&&s.is_active&&e.jsx(ve,{user:s}),e.jsx(c,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{s.is_active&&(window.location.href=`/dashboard/freelancer-profile/${s.id}`)},disabled:!s.is_active,children:"View Profile"})]})]})]})})},s.id))}),b&&b.length>=n&&e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>f(s=>Math.max(0,s-1)),disabled:o===0||v,children:"Previous"}),e.jsxs("span",{className:"text-muted-foreground text-sm",children:["Page ",o+1," - Showing ",x.length," users"]}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>f(s=>s+1),disabled:b.length<n||v,children:"Next"}),v&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[e.jsx(y,{className:"h-4 w-4 animate-spin"}),"Loading..."]})]})]})]})]})})})};export{_e as component};
